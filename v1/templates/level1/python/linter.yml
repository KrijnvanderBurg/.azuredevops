# Level 1 template for Python code linting
# Combines multiple Level 0 linting templates (ruff, pylint, flake8)

parameters:
  - name: enabled
    type: boolean
    default: true
    
  - name: continueOnError
    type: boolean
    default: false
    
  - name: pythonSrcDirectory
    type: string
    default: $(Build.SourcesDirectory)
    
  - name: pythonSourceDirectories
    type: string
    default: "src tests"

steps:
  - template: ../../level0/python/ruff_linter.yml
    parameters:
      pythonSrcDirectory: ${{ parameters.pythonSrcDirectory }}
      pythonSourceDirectories: ${{ parameters.pythonSourceDirectories }}
      continueOnError: ${{ parameters.continueOnError }}
      enabled: ${{ parameters.enabled }}

  - template: ../../level0/python/pylint_linter.yml
    parameters:
      pythonSrcDirectory: ${{ parameters.pythonSrcDirectory }}
      pythonSourceDirectories: ${{ parameters.pythonSourceDirectories }}
      continueOnError: ${{ parameters.continueOnError }}
      enabled: ${{ parameters.enabled }}

  - template: ../../level0/python/flake8_linter.yml
    parameters:
      pythonSrcDirectory: ${{ parameters.pythonSrcDirectory }}
      pythonSourceDirectories: ${{ parameters.pythonSourceDirectories }}
      continueOnError: ${{ parameters.continueOnError }}
      enabled: ${{ parameters.enabled }}
      
  - script: |
      echo "##[section]Code linting complete"
    displayName: 'Code linting summary'
    condition: and(succeeded(), eq('${{ parameters.enabled }}', 'true'))

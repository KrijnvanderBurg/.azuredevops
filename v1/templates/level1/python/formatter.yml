# Level 1 template for Python code formatting
# Combines multiple Level 0 formatting templates (black, isort, ruff)

parameters:
  - name: pythonSrcDirectory
    type: string
    default: $(Build.SourcesDirectory)
    
  - name: pythonSourceDirectories
    type: string
    default: "src tests"
    
  - name: enabled
    type: boolean
    default: true
    
  - name: continueOnError
    type: boolean
    default: false

steps:
- template: ../../level0/python/black_formatter.yml
  parameters:
    pythonSrcDirectory: ${{ parameters.pythonSrcDirectory }}
    pythonSourceDirectories: ${{ parameters.pythonSourceDirectories }}
    enabled: ${{ parameters.enabled }}
    continueOnError: ${{ parameters.continueOnError }}

- template: ../../level0/python/isort_formatter.yml
  parameters:
    pythonSrcDirectory: ${{ parameters.pythonSrcDirectory }}
    pythonSourceDirectories: ${{ parameters.pythonSourceDirectories }}
    enabled: ${{ parameters.enabled }}
    continueOnError: ${{ parameters.continueOnError }}

- template: ../../level0/python/ruff_formatter.yml
  parameters:
    pythonSrcDirectory: ${{ parameters.pythonSrcDirectory }}
    pythonSourceDirectories: ${{ parameters.pythonSourceDirectories }}
    enabled: ${{ parameters.enabled }}
    continueOnError: ${{ parameters.continueOnError }}

- script: |
    echo "##[section]Code formatting complete"
  displayName: 'Code formatting summary'
  condition: and(succeeded(), eq('${{ parameters.enabled }}', 'true'))